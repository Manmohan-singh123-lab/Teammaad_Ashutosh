<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RF Lab: Noise Figure Measurement Simulator</title>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1>RF Lab: Noise Figure Measurement Simulator</h1>
            <p>Interactive demonstration of Y-factor method for measuring amplifier noise figure</p>
        </header>

        <!-- Main Control Bar -->
        <div class="control-bar">
            <div class="control-left">
                <button id="toggle-simulation" class="btn btn-primary">
                    <i class="fas fa-play"></i>
                    <span>Start Simulation</span>
                </button>
                <button id="reset-simulation" class="btn btn-outline">
                    <i class="fas fa-redo"></i>
                    Reset
                </button>
                <div class="voice-control">
                    <i class="fas fa-volume-up"></i>
                    <label class="switch">
                        <input type="checkbox" id="voice-toggle" checked>
                        <span class="slider"></span>
                    </label>
                    <span>Voice Guide</span>
                </div>
            </div>
            <div class="control-right">
                <div class="badge badge-outline">Step <span id="current-step-display">1</span> of 5</div>
                <div class="badge" id="status-badge">STOPPED</div>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Left Column -->
            <div class="left-column">
                <!-- Circuit Diagram -->
                <div class="card circuit-card">
                    <h3><i class="fas fa-microchip"></i> RF Circuit Diagram</h3>
                    <div class="circuit-container">
                        <svg id="circuit-svg" viewBox="0 0 800 400" class="circuit-diagram">
                            <!-- Signal Generator -->
                            <g class="signal-generator">
                                <rect x="50" y="150" width="80" height="60" fill="#4A90E2" stroke="#fff" stroke-width="2" rx="5"/>
                                <text x="90" y="175" text-anchor="middle" fill="white" font-size="12">Signal</text>
                                <text x="90" y="190" text-anchor="middle" fill="white" font-size="12">Generator</text>
                                <circle id="signal-indicator" cx="140" cy="180" r="8" fill="#00ff00" opacity="0.5"/>
                            </g>
                            
                            <!-- Noise Source -->
                            <g class="noise-source">
                                <rect x="50" y="70" width="80" height="40" fill="#E74C3C" stroke="#fff" stroke-width="2" rx="5"/>
                                <text x="90" y="95" text-anchor="middle" fill="white" font-size="12">Noise Source</text>
                                <circle id="noise-indicator" cx="140" cy="90" r="8" fill="#ff0000" opacity="0.3"/>
                            </g>
                            
                            <!-- Combiner -->
                            <g class="combiner">
                                <circle cx="200" cy="140" r="30" fill="#8E44AD" stroke="#fff" stroke-width="2"/>
                                <text x="200" y="145" text-anchor="middle" fill="white" font-size="10">+</text>
                                <line x1="140" y1="90" x2="180" y2="120" stroke="#fff" stroke-width="2"/>
                                <line x1="140" y1="180" x2="180" y2="160" stroke="#fff" stroke-width="2"/>
                            </g>
                            
                            <!-- Amplifier -->
                            <g class="amplifier">
                                <polygon points="280,120 280,160 350,140" fill="#27AE60" stroke="#fff" stroke-width="2"/>
                                <text x="310" y="145" text-anchor="middle" fill="white" font-size="12">AMP</text>
                                <line x1="230" y1="140" x2="280" y2="140" stroke="#fff" stroke-width="2"/>
                            </g>
                            
                            <!-- Power Meter -->
                            <g class="power-meter">
                                <rect x="400" y="110" width="100" height="60" fill="#F39C12" stroke="#fff" stroke-width="2" rx="5"/>
                                <text x="450" y="135" text-anchor="middle" fill="white" font-size="12">Power</text>
                                <text x="450" y="150" text-anchor="middle" fill="white" font-size="12">Meter</text>
                                <line x1="350" y1="140" x2="400" y2="140" stroke="#fff" stroke-width="2"/>
                            </g>
                            
                            <!-- Connection lines -->
                            <line x1="230" y1="140" x2="280" y2="140" stroke="#fff" stroke-width="2"/>
                            
                            <!-- Power indicators -->
                            <text id="input-power-text" x="250" y="130" text-anchor="middle" fill="#00ff00" font-size="10">0.1 mW</text>
                            <text id="output-power-text" x="525" y="135" text-anchor="middle" fill="#00ff00" font-size="10">0 dBm</text>
                        </svg>
                    </div>
                </div>

                <!-- Control Panel -->
                <div class="card control-panel">
                    <h3>Control Panel</h3>
                    <div class="control-grid">
                        <!-- Signal Generator Controls -->
                        <div class="control-section">
                            <h4><i class="fas fa-broadcast-tower"></i> Signal Generator</h4>
                            
                            <div class="control-item">
                                <div class="control-header">
                                    <label>Signal Type</label>
                                    <div class="badge badge-outline" id="signal-type-display">Sine Wave</div>
                                </div>
                                <select id="signal-type" class="control-select">
                                    <option value="Sine Wave">Sine Wave</option>
                                    <option value="Square Wave">Square Wave</option>
                                    <option value="Triangular Wave">Triangular Wave</option>
                                    <option value="Sawtooth Wave">Sawtooth Wave</option>
                                    <option value="Pulse Wave">Pulse Wave</option>
                                </select>
                            </div>

                            <div class="control-item">
                                <div class="control-header">
                                    <label>Amplitude (V)</label>
                                    <div class="badge badge-outline" id="amplitude-display">1.0 V</div>
                                </div>
                                <input type="range" id="amplitude" min="0.1" max="100" step="0.1" value="1.0" class="slider">
                            </div>

                            <div class="control-item">
                                <div class="control-header">
                                    <label>Input Level (mW)</label>
                                    <div class="badge badge-outline" id="input-level-display">0.1 mW</div>
                                </div>
                                <input type="range" id="input-level" min="0.001" max="10" step="0.001" value="0.1" class="slider">
                            </div>

                            <div class="control-item">
                                <div class="control-header">
                                    <label>Frequency (MHz)</label>
                                    <div class="badge badge-outline" id="frequency-display">1000 MHz</div>
                                </div>
                                <input type="range" id="frequency" min="100" max="3000" step="100" value="1000" class="slider">
                            </div>
                        </div>

                        <!-- Amplifier Controls -->
                        <div class="control-section">
                            <h4><i class="fas fa-microchip"></i> Amplifier & Environment</h4>
                            
                            <div class="control-item">
                                <div class="control-header">
                                    <label>Amplifier Gain (dB)</label>
                                    <div class="badge badge-outline" id="gain-display">20 dB</div>
                                </div>
                                <input type="range" id="amplifier-gain" min="10" max="40" step="1" value="20" class="slider">
                            </div>

                            <div class="control-item">
                                <div class="control-header">
                                    <label>Temperature (K)</label>
                                    <div class="badge badge-outline" id="temperature-display">290 K</div>
                                </div>
                                <input type="range" id="temperature" min="200" max="400" step="10" value="290" class="slider">
                            </div>

                            <div class="control-item">
                                <div class="control-header">
                                    <label>Noise Source</label>
                                    <div class="badge" id="noise-source-badge">OFF</div>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="noise-source-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div id="controls-locked" class="locked-notice" style="display: none;">
                        <i class="fas fa-lock"></i>
                        Controls are locked during guided measurement. Use the step guide to proceed.
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="right-column">
                <!-- Step Guide -->
                <div class="card step-guide">
                    <h3><i class="fas fa-list-ol"></i> Step Guide</h3>
                    <div class="step-progress">
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                    
                    <div id="step-content" class="step-content">
                        <div class="step-header">
                            <h4 id="step-title">Setup Signal Generator</h4>
                            <div class="badge badge-outline" id="step-number">Step 1 of 5</div>
                        </div>
                        <p id="step-description">Configure input signal level and frequency</p>
                        <div class="step-instruction">
                            <p id="step-instruction-text">Set the signal generator to desired frequency and power level. This will be our reference signal for noise measurements.</p>
                        </div>
                        <button id="next-step" class="btn btn-primary" disabled>
                            <i class="fas fa-arrow-right"></i>
                            Next Step
                        </button>
                    </div>
                </div>

                <!-- Measurement Panel -->
                <div class="card measurement-panel">
                    <h3><i class="fas fa-chart-line"></i> Measurement Results</h3>
                    
                    <!-- Signal Information -->
                    <div class="measurement-section">
                        <h4><i class="fas fa-radio"></i> Signal Information</h4>
                        <div class="measurement-grid">
                            <div class="measurement-item">
                                <div class="measurement-label">Signal Type</div>
                                <div class="badge badge-outline" id="measurement-signal-type">Sine Wave</div>
                            </div>
                            <div class="measurement-item">
                                <div class="measurement-label">Frequency</div>
                                <div class="badge badge-outline" id="measurement-frequency">1000 MHz</div>
                            </div>
                        </div>
                    </div>

                    <!-- Noise Power Measurements -->
                    <div class="measurement-section">
                        <h4><i class="fas fa-bolt"></i> Noise Power (mW)</h4>
                        <div class="measurement-grid">
                            <div class="measurement-item">
                                <div class="measurement-label">Cold Noise</div>
                                <div class="badge" id="cold-noise-badge">---</div>
                            </div>
                            <div class="measurement-item">
                                <div class="measurement-label">Hot Noise</div>
                                <div class="badge" id="hot-noise-badge">---</div>
                            </div>
                        </div>
                    </div>

                    <!-- Calculated Results -->
                    <div class="measurement-section">
                        <h4><i class="fas fa-calculator"></i> Calculated Results</h4>
                        <div class="measurement-grid">
                            <div class="measurement-item">
                                <div class="measurement-label">Y-Factor</div>
                                <div class="badge" id="y-factor-badge">---</div>
                            </div>
                            <div class="measurement-item">
                                <div class="measurement-label">Noise Figure</div>
                                <div class="badge" id="noise-figure-badge">---</div>
                            </div>
                            <div class="measurement-item full-width">
                                <div class="measurement-label">Output Power</div>
                                <div class="badge badge-outline" id="output-power-badge">0 dBm</div>
                            </div>
                        </div>
                    </div>

                    <!-- Formula Information -->
                    <div id="formula-section" class="formula-section" style="display: none;">
                        <h5>Y-Factor Method:</h5>
                        <p>NF = ENR - 10×log₁₀(Y-1)</p>
                        <p id="y-ratio">Y = P_hot / P_cold = 1.00</p>
                    </div>

                    <div id="measurement-prompt" class="measurement-prompt">
                        <i class="fas fa-info-circle"></i>
                        Start the simulation to see measurement results.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
